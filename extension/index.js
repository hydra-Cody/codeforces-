!function(){"use strict";var e={$:(e,t)=>(t||document).querySelector(e),$$:(e,t)=>(t||document).querySelectorAll(e),on(e,t,n,o){e.addEventListener(t,n,o||{})},element(e,t,...n){let o;if("string"==typeof e){if(o=document.createElement(e),Object.assign(o,t),t)for(let e in t)e.startsWith("data-")||"for"==e?o.setAttribute(e,t[e]):(r=e).length>2&&"o"==r[0]&&"n"==r[1]&&r[2]>="A"&&r[2]<="Z"&&o.addEventListener(e.substr(2).toLowerCase(),t[e])}else"function"==typeof e&&(o=e(t));var r;for(let e of n)"string"==typeof e?o.appendChild(document.createTextNode(e)):e instanceof Array?o.append(...e):e&&o.appendChild(e);return o},fragment(...e){let t=document.createDocumentFragment();for(let n of e)if("string"==typeof n)t.appendChild(document.createTextNode(n));else if(n instanceof Array)for(let e of n)t.appendChild(e);else n&&t.appendChild(n);return t},isEditable(e){const t="INPUT"==e.tagName&&-1==["button","checkbox","color","file","hidden","image","radio","reset","submit"].indexOf(e.type),n="TEXTAREA"==e.tagName,o="SELECT"==e.tagName;return t||n||o||e.isContentEditable}};function t(e,t){return(...n)=>{try{return e(...n)}catch{return t}}}const n=(...e)=>t=>e.reduce((e,t)=>t(e),t);function o(e){const t=e.reduce((e,t)=>e+(e=>e&&"number"==typeof e.length?e.length:1)(t),0);let n=new Array(t),o=0;for(let t=0;t<e.length;t++)if(e[t]&&e[t].length>=0)for(let r=0;r<e[t].length;r++)n[o++]=e[t][r];else n[o++]=e[t];return n}function r(e){let t,n=!1;return function(...o){return n||(n=!0,t=e(...o)),t}}const s=function(){};let a={};function i(e,t){a[e]||(a[e]=[]),a[e].push(t)}async function l(e,t){const n=(a[e]||[]).map(async e=>e(t));return Promise.all(n)}const c=e=>(...t)=>"complete"==document.readyState?Promise.resolve(e(...t)):new Promise(n=>document.addEventListener("DOMContentLoaded",()=>n(e(...t)),{once:!0})),d=r(c((function(){const t=e.$(".lang-chooser").children[1].children[0].innerText.trim();return"Enter"==t?"tourist":t})));const p=window,u=s;let m={resolvers:{},genID:(f=1,()=>0|f++),send(e){return this.init(),new Promise((t,n)=>{let o=this.genID();e.id=o,e.to="cs",this.resolvers[o]=t,window.postMessage(e,"*"),setTimeout(()=>n("Failed to get configuration: timeout"),2e4)})},initialized:!1,init(){this.initialized||(this.initialized=!0,window.addEventListener("message",e=>{u("[mph] Got",e.data),e.origin===window.origin&&"is"==e.data.to&&("bg result"==e.data.type?(this.resolvers[e.data.id](e.data.result),delete this.resolvers[e.data.id]):"config change"==e.data.type&&l("request config change",{id:e.data.id,value:e.data.value}))}))}};var f;const h={get:e=>m.send({type:"get storage",key:e}).then((e=>t=>t[e])(e)),set:(e,t)=>m.send({type:"set storage",key:e,value:t}),propagate:(e,t)=>m.send({type:"propagate config",key:e,value:t})};let b={};b={...Object.freeze({__proto__:null,version:"2.4.1",ready:c,run_when_ready:e=>c(e)(),userHandle:d}),...Object.freeze({__proto__:null,global:p,storage:h})};var g=b;let y={};function v(){localStorage.cfpp=JSON.stringify(y),g.storage.set("cfpp",y)}const k=e=>y[e];function w(e,t){y[e]!=t&&(y[e]=t,function(e){l(e,y[e]),v(),g.storage.propagate(e,y[e])}(e))}const C=e=>w(e,!y[e]),_={showTags:!0,style:!0,darkTheme:!1,standingsItv:0,standingsTwin:!1,defStandings:"common",hideTestNumber:!1,sidebarBox:!0,tutorialSpoilers:!1,mashupSpoilers:!1,shortcuts:{darkTheme:"Ctrl+I",finder:"Ctrl+Space",submit:"Ctrl+S",scrollToContent:"Ctrl+Alt+C",hideTestNumber:"Ctrl+Shift+H"}};function $(){return g.storage.get("cfpp").then(e=>{((e={},t={})=>Object.keys(t).filter(n=>e[n]!=t[n]))(y,e).forEach(t=>{y[t]=e[t],l(t,e[t])})}).then(v)}const x="function"==typeof GM_addStyle?GM_addStyle:async function(t){let n=e.element("style",{className:"cfpp-style"},t);return(document.body||document.head||document.documentElement).appendChild(n),n};let T;async function E(){T=await x("@font-face{font-family:'Libre Franklin';font-style:normal;font-weight:400;font-display:swap;src:local('Libre Franklin'),local('LibreFranklin-Regular'),url(https://fonts.gstatic.com/s/librefranklin/v4/jizDREVItHgc8qDIbSTKq4XkRiUR2zcLig.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;}@font-face{font-family:'Libre Franklin';font-style:normal;font-weight:400;font-display:swap;src:local('Libre Franklin'),local('LibreFranklin-Regular'),url(https://fonts.gstatic.com/s/librefranklin/v4/jizDREVItHgc8qDIbSTKq4XkRiUf2zc.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;}a,a:visited,a:link,.contest-state-phase{text-decoration:none!important;color:#2c63d5;}.titled,.caption{color:#2c63d5!important;}body *,body>div p,body>div li,body>div th,body>div span:not(.tex-span),body>div .problem-statement .header .title,body>div .problem-statement .section-title,body>div .problem-statement .sample-tests,body>div .ttypography p,body>div .second-level-menu-list li,body>div td{font-family:'Libre Franklin','Roboto',sans-serif;}body>div div.ttypography pre,body>div pre.prettyprint li,body>div code.prettyprint span:not(.tex-span),body>div pre.prettyprint span:not(.tex-span){font-family:monospace;}.menu-list-container a{text-transform:none!important;font-variant:small-caps;}.roundbox-lt,.roundbox-lb,.roundbox-rt,.roundbox-rb,.lt,.lb,.rt,.rb,.ilt,.ilb,.irt,.irb{display:none;}.roundbox{border-radius:6px;overflow:hidden;border:none!important;box-shadow:1px 1px 5px rgba(108,108,108,0.17);}.titled{border:none!important;}table th,table td{border:none!important;}.datatable{background-color:#f8f8f8!important;}.title-photo div:first-child,.userbox{border:none!important;}.nav-links li{list-style:none!important;}.backLava{display:none!important;}input[type=submit]{background:#d2d2d245;border:none;border-bottom:3px solid #b6b6b678;padding:0.4em 1.1em!important;border-radius:6px;cursor:pointer;}input[type=submit]:active{border-bottom:1px solid #b6b6b678;}.submitForm input,.submitForm select{border:none;}.input-output-copier{text-transform:lowercase;font-variant:small-caps;border:none;}.lang-chooser{font-size:0;}.lang-chooser a{font-size:small;margin-left:0.3em;}.problem-statement{margin:0!important;}.problem-statement .property-title{display:none!important;}.problem-statement .header .title{font-size:200%!important;margin-bottom:0!important;}.problem-statement .header{margin:2.5em 0 1.5em!important;text-align:left!important;}.problem-statement .header>div{display:inline-block!important;margin-right:0.5em;}.problem-statement .header>div:not(.title){color:#9E9E9E;}.problem-statement .header>div:not(:last-child)::after{content:\",\";}div.ttypography p,.sample-test{margin-bottom:1.5em!important;}.problem-statement .section-title{font-size:150%;margin-bottom:0.25em;}.source-and-history-div{border:none;}#facebox{position:fixed!important;top:50%!important;left:50%!important;transform:translate(-50% ,-50%);}html{background:#f2f2f2;}body{background:inherit!important;margin:0;}#pageContent{background:white;padding:1.5em!important;border-radius:6px;box-shadow:1px 1px 5px rgba(108,108,108,0.17);}.problem-statement .header,div.ttypography{margin:0 0 1em!important;}")}async function S(){}var N=Object.freeze({__proto__:null,custom:E,common:S,install:function(){k("style")&&E()},uninstall:function(){T&&T.remove(),T=void 0}});var L=Object.freeze({__proto__:null,install:function(){k("darkTheme")&&document.documentElement.classList.add("cfpp-dark-mode")},uninstall:function(){document.documentElement.classList.remove("cfpp-dark-mode")}});const F=g.ready((function(){if(!k("showTags")||!e.$(".tag-box"))return;if(e.$(".verdict-accepted"))return;let t=e.$(".tag-box").parentNode.parentNode;t.style.display="none",t.parentNode.appendChild(e.element((function(){return e.element("button",{className:"caption showTagsBtn",style:"background: transparent; border: none; cursor: pointer;",onClick:P},"Show")}),null))})),P=g.ready((function(){let t=e.$(".showTagsBtn");if(t){t.remove(),e.$(".tag-box").parentNode.parentNode.style.display="block"}}));var O=Object.freeze({__proto__:null,install:F,uninstall:P});function U(t){let n=e.$$(".problems tr:not(.accepted-problem)");for(let e of n){let n=e.children[1].children[1]||{};n=n.style||{},n.display=t}}const A=g.ready((function(){k("showTags")&&e.$(".problems")&&U("none")}));var M=Object.freeze({__proto__:null,install:A,uninstall:()=>U("block")});const j=g.ready((function(){if(!/\/(gym|group)\/(.?)+\/problem\/\w$/i.test(location.pathname))return;let t=e.$(".problem-statement .title").innerText;t=t.split(".").slice(1).join("."),t+=" codeforces";const n="https://google.com/search?q="+encodeURIComponent(t);e.$(".second-level-menu-list").appendChild(e.element("li",null,e.element("a",{href:n,target:"_blank",className:"searchBtn"}," Google It ")))}));var z=Object.freeze({__proto__:null,install:j,uninstall:function(){let t=e.$(".searchBtn");t&&t.remove()}});function R(){e.$(".cfpp-tutorial").classList.add("cfpp-hidden")}const I=e=>new Promise((function(t,n){const o=g.global.Codeforces.getCsrfToken();let r=new XMLHttpRequest;r.open("POST","/data/problemTutorial"),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),r.setRequestHeader("X-Csrf-Token",o),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.responseType="json",r.onload=()=>{r.response&&r.response.success?t(r.response.html):n("couldn't query the API")},r.onerror=()=>n("couldn't query the API"),r.send(`problemCode=${e}&csrf_token=${o}`)}));const D=r((async function(){let[t,n]=function(){let t=e.element("div",{className:"cfpp-modal-inner"},"loading..."),n=e.element("div",{className:"cfpp-modal cfpp-tutorial cfpp-hidden"},e.element("div",{className:"cfpp-modal-background",onClick:R}),t);return e.on(document,"keyup",e=>{"Escape"==e.key&&R()}),[n,t]}();return document.body.appendChild(t),async function(e){let t=e.match(/\/problemset\/problem\/(\d+)\/(.+)|\/contest\/(\d+)\/problem\/(.+)/i);if(t[1])return t[1]+t[2];if(t[3])return t[3]+t[4];throw"couldn't get problem code from URL"}(location.pathname).then(I).then(e=>n.innerHTML=e).then(()=>function(t){const n=e=>[].slice.call(e?e.children:[]),o=e=>t=>t.classList.toggle("spoilered",e);function r(r){n(e.$(".problem-statement>div",t)).forEach(e=>{"UL"==e.tagName?n(e).forEach(o(r)):o(r)(e)})}r(k("tutorialSpoilers")),i("tutorialSpoilers",r),t.children[0].appendChild(e.element("span",{style:"font-size: 0.65em; float: right; cursor: pointer;",onClick:()=>C("tutorialSpoilers")},"Toggle spoilers"))}(n)).then(()=>MathJax.Hub.Queue(()=>MathJax.Hub.Typeset(n))).catch(e=>n.innerText="Failed to load the tutorial: "+e)})),q=g.ready((function(){if(!/\/problemset\/problem\/|\/contest\/\d+\/problem\/(\w|\d)/i.test(location.pathname))return;let t=e.element("a",{className:"cfpp-tutorial-btn",style:"cursor: pointer;"}," Tutorial ");e.on(t,"click",()=>{D(),e.$(".cfpp-tutorial").classList.remove("cfpp-hidden")}),"requestIdleCallback"in g.global&&g.global.requestIdleCallback(D,{timeout:1e4}),e.$(".second-level-menu-list").appendChild(e.element("li",null,t))}));var B=Object.freeze({__proto__:null,install:q});const H=g.ready((async function(){const t=await g.userHandle();let n=e.$(".main-menu-list"),o=e.element("nav",{className:"cfpp-navbar"});n.parentNode.parentNode.style.overflow="visible";let r={"/":{},"/groups":{"My Groups":"/groups/with/"+t,"My Teams":"/teams/with/"+t},"/problemset":{Status:"/problemset/status","Friends Status":"/problemset/status?friends=on","My Submissions":"/submissions/"+t,Favourites:"/favourite/problems","ACM SGU":"/problemsets/acmsguru"},"/contests":{"My Contests":"/contests/with/"+t,"My Problems":"/contests/writer/"+t},"/gyms":{Mashups:"/mashups"},"/ratings":{Friends:"/ratings/friends/true"},"/edu/courses":{}},s=e.element("div",{className:"cfpp-navbar-item"},e.element("a",{href:"#"},"Other")),a=e.element("div",{className:"cfpp-dropdown"});for(let t of n.children){let n=t.children[0],s=e.element("div",{className:"cfpp-navbar-item"},n);const i=n.getAttribute("href");if(r[i]){let t=e.element("div",{className:"cfpp-dropdown"});for(let n in r[i])t.appendChild(e.element("a",{href:r[i][n]},n));t.children.length&&s.appendChild(t),o.appendChild(s)}else a.appendChild(e.element("a",{href:i},n))}s.appendChild(a),o.appendChild(s),n.replaceWith(o);let i=e.$("#header img");i&&/codeforces-logo/.test(i.getAttribute("src"))&&i.setAttribute("src","https://github.com/LeoRiether/CodeforcesPP/raw/master/assets/codeforcespp.png")}));var G=Object.freeze({__proto__:null,install:H});const V=g.ready((function(){/\/groups\/with\//i.test(location.pathname)&&e.$$(".datatable a.groupName").forEach(e=>e.href=e.href.replace("/members","/contests"));const t=location.pathname.match(/problemset\/problem\/(\d+)/i);t&&function(t){let n=e.$$(".second-level-menu-list a");for(let e of n)if(e.href.endsWith("/problemset/standings"))return void(e.href=e.href.replace("problemset","contest/"+t))}(t[1]),"Friends"!=k("defStandings")||/\/standings/i.test(location.pathname)||function(){let e=document.getElementsByTagName("a");for(let t of e)if(t.href.endsWith("/problemset/standings")){let e=new URL(t.href);e.searchParams.set("friendsEnabled","on"),t.href=e.href}else t.href.endsWith("/standings")&&(t.href+="/friends/true")}(),e.$(".contestParticipantCountLinkMargin")&&e.$$(".contestParticipantCountLinkMargin").forEach(e=>e.href+="/friends/true"),(/gym\/\d+$/i.test(location.pathname)||/group\/[a-zA-Z0-9]+\/contest\/\d+$/i.test(location.pathname))&&e.$("#sidebar").children[0].insertAdjacentElement("afterend",e.element("div",{class:"roundbox sidebox"},e.element("div",{class:"caption titled"},"→ Virtual participation"),e.element("form",{style:"text-align:center; margin:1em;",action:location.href+"/virtual",method:"get"},e.element("input",{type:"submit",value:"Start virtual contest"}))))}));var W=Object.freeze({__proto__:null,install:V});function J(t){[].slice.call(t.getElementsByTagName("script")).forEach(n=>{const o=n.childNodes[0].nodeValue;((e,t)=>e.some(e=>t.includes(e)))(["handleContestantProblemHistory","statisticsRow"],o)&&(t.appendChild(e.element("script",{type:"text/javascript"},o)),n.remove())})}const K=t=>fetch(t).then(e=>e.text()).then(e=>(new DOMParser).parseFromString(e,"text/html")).then(t=>e.$("#pageContent",t)||Promise.reject("You might be offline or Codeforces is down!"));function X(){const t=K(location.href).then(g.ready(t=>(e.$("#pageContent").replaceWith(t),t))).catch(e=>console.error("Couldn't load the standings. Reason: ",e)),n=l("standings updated");Promise.all([t,n]).then(([e,t])=>J(e))}let Z=0;function Q(){clearInterval(Z),Z=0}var Y=Object.freeze({__proto__:null,install:function(){Z&&Q();const e=+k("standingsItv");e>0&&location.pathname.includes("/standings")&&(Z=setInterval(X,1e3*e))},uninstall:Q});const ee=r(async e=>{if(1!=e.div&&2!=e.div)return!1;const t=e=>`//codeforces.com/api/contest.standings?contestId=${e}&count=1&from=1`;let n=fetch(t(e.id)).then(e=>e.json()),o=fetch(t(e.twinID)).then(e=>e.json());return Promise.all([n,o]).then(([e,t])=>"OK"==e.status&&"OK"==t.status&&e.result.contest.startTimeSeconds==t.result.contest.startTimeSeconds)}),te=r(e=>location.href.replace(`/${e.id}/`,`/${e.twinID}/`)),ne=g.ready((function(){let t=e.$("#cfpp-twin-standings");if(!t)return;const n=te();return K(n).then(n=>{e.$(".toggle-show-unofficial",n).remove(),e.$(".source-and-history-div",n).remove(),e.$(".history-div",n).remove(),e.$(".second-level-menu",n).remove(),t.children.length?t.children[0].replaceWith(n):t.appendChild(n)}).catch(e=>console.error("Couldn't load twin standings. Reason: ",e))})),oe=r(()=>i("standings updated",ne)),re=g.ready((async function(){const t=k("standingsTwin"),n=location.pathname.includes("/problemset/standings"),o=location.pathname.includes("/standings");if(!t||n||!o)return;let r=function(){const t=e.$("#pageContent"),n=e.$(".contest-name",t).innerText,o=+/\/contest\/(\d+)\//.exec(location.href)[1],r=+(/Div\. (\d)/i.exec(n)||[])[1];return{pageContent:t,name:n,id:o,div:r,twinID:1==r?o+1:o-1}}();if(!await ee(r))return;te(r);let s=e.element("div",{id:"cfpp-twin-standings"});r.pageContent.parentNode.appendChild(s),ne().then(()=>J(s)),oe()}));var se=Object.freeze({__proto__:null,update:ne,install:re,uninstall:function(){let t=e.$("#cfpp-twin-standings");t&&t.remove()}});const ae=/ on (pre)?test ?\d*$/,ie=e=>e.replace(ae,""),le=t(e=>{let t=e.childNodes[0];t.nodeValue=ie(t.nodeValue)},"");let ce=!1;function de(){if(ce)return;ce=!0;let t=g.global.Codeforces.showMessage;if(g.global.Codeforces.showMessage=function(e){k("hideTestNumber")&&(e=ie(e)),t(e)},g.global.submissionsEventCatcher){const t=g.global.submissionsEventCatcher.channels[0];g.global.submissionsEventCatcher.subscribe(t,t=>{if(k("hideTestNumber")&&"s"===t.t){const n=e.$(`[data-a='${t.d[0]}'] .status-verdict-cell span`);le(n)}})}}const pe=g.ready((function(){k("hideTestNumber")&&(de(),document.documentElement.classList.add("verdict-hide-number"),e.$$(".verdict-rejected,.verdict-waiting").forEach(le))}));var ue=Object.freeze({__proto__:null,init:de,install:pe,uninstall:function(){document.documentElement.classList.contains("verdict-hide-number")&&(document.documentElement.classList.remove("verdict-hide-number"),e.$$(".verdict-rejected,.verdict-waiting").forEach(e=>{e.childNodes[0].nodeValue+=" on test "}))}});function me(){let e=new URLSearchParams;return e.append("action","toggleGymContestsManagerEnabled"),e.append("csrf_token",g.global.Codeforces.getCsrfToken()),e.append("_tta",g.global.Codeforces.tta()),fetch("/gyms",{method:"POST",body:e}).then(e=>e.text()).then(e=>{let t=(new DOMParser).parseFromString(e,"text/html").querySelector(".toggleGymContestsManagerEnabled input[type=submit]"),n=t&&t.value.startsWith("Disable")?"enabled":"disabled";g.global.Codeforces.reloadAndShowMessage("Coach mode is now "+n)}).catch(e=>console.error("Codeforces++ couldn't toggle coach mode: ",e))}let fe=!1;const he=t(JSON.parse,{});function be(t){return t.href||t.onClick||console.error(`Codeforces++ Error!\nPlease report this on GitHub: https://github.com/LeoRiether/CodeforcesPP\n<Result> was created without any action attached. key=${t.key}.`),e.element("li",{"data-key":t.key,"data-search":t.title.toLowerCase()},t.href?e.element("a",{href:t.href},t.title):e.element("a",{href:"#",onClick:t.onClick},t.title))}let ge={common:e=>[{key:"contests",title:"Contests",href:"/contests"},{key:"problemset",title:"Problemset",href:"/problemset"},{key:"psetting",title:"Problemsetting",href:"/contests/with/"+e},{key:"subms",title:"Submissions",href:"/submissions/"+e},{key:"groups",title:"Groups",href:"/groups/with/"+e},{key:"profile",title:"Profile",href:"/profile/"+e},{key:"cfviz",title:"CfViz",href:"https://cfviz.netlify.com"},{key:"favs",title:"Favourites",href:"/favourite/problems"},{key:"teams",title:"Teams",href:"/teams/with/"+e},{key:"status",title:"Status",href:"/problemset/status"},{key:"fstatus",title:"Friends Status",href:"/problemset/status?friends=on"},{key:"gym",title:"Gym",href:"/gyms"},{key:"blog",title:"Blog",href:"/blog/handle/"+e},{key:"mashups",title:"Mashups",href:"/mashups"},{key:"rating",title:"Rating",href:"/ratings"},{key:"api",title:"API",href:"/apiHelp"},{key:"togCoach",title:"Toggle Coach Mode",onClick:me}],problem:()=>[{key:"tutorial",title:"Problem: Tutorial",onClick(){ke(),e.$(".cfpp-tutorial-btn").click()}},{key:"submit",title:"Problem: Submit",onClick(){ke(),e.$("#sidebar [name=sourceFile]").click()}}],contest(e,t,n){const o=n?"Gym":"Contest";return e+=`${o.toLowerCase()}/${t}`,[{key:"cstandings",title:o+": Standings",href:`${e}/standings/${"Friends"===k("defStandings")?"/friends/true":""}`},{key:"cproblems",title:o+": Problems",href:""+e},{key:"csubmit",title:o+": Submit",href:e+"/submit"},{key:"csubmissions",title:o+": Submissions",href:e+"/my"},{key:"invoc",title:o+": Custom Invocation",href:e+"/customtest"},{key:"cstatus",title:o+": Status",href:e+"/status"},{key:"virtual",title:o+": Virtual",href:e+"/virtual"}]},groups(){var e;return n(t(JSON.parse,[]),(e=([e,t])=>({key:"group_"+t,title:"Group: "+e,href:`/group/${t}/contests`}),t=>[].map.call(t,e)))(localStorage.userGroups)}};const ye=r((async function(){let t=e.element("input",{type:"text",className:"finder-input",placeholder:"Search anything"}),n=e.element("ul",{className:"finder-results"}),r=e.element("div",{className:"cfpp-modal cfpp-hidden",tabindex:"0"},e.element("div",{className:"cfpp-modal-background",onClick:ke}),e.element("div",{className:"finder-inner",tabindex:"0"},t,n));e.on(document,"keyup",e=>{"Escape"==e.key&&ke()});const s=await async function(){const e=await g.userHandle();let t=[];/\/problemset\/problem\/|\/contest\/\d+\/problem\/\w/i.test(location.pathname)&&t.push(ge.problem());const n=location.href.match(/\/contest\/(\d+)/i),r=n||location.href.match(/\/gym\/(\d+)/i);if(n){const e=location.href.substring(0,location.href.indexOf("contest"));t.push(ge.contest(e,n[1],!1))}else if(r){const e=location.href.substring(0,location.href.indexOf("gym"));t.push(ge.contest(e,r[1],!0))}else t.push([{key:"invoc",title:"Custom Invocation",href:"/problemset/customtest"}]);t.push(ge.groups()),t.push(ge.common(e)),t=o(t);let s=he(localStorage.finderPriority);return t=t.sort((e,t)=>(s[t.key]||0)-(s[e.key]||0)),t}();return n.append(...s.map(t=>e.element(be,t))),function(t,n){const o=e=>{let t=e.children[0];t.focus(),t.scrollIntoViewIfNeeded()};e.on(t,"input",()=>{var e;[].forEach.call(n.children,(e=t.value,t=>t.style.display=function(e,t){let n=t.length-1;for(let o=e.length-1;o>=0&&n>=0;o--)e[o]==t[n]&&n--;return n<0}(t.dataset.search,e.toLowerCase())?"":"none"))}),e.on(t,"keydown",e=>{const t=Array.from(n.children).filter(e=>""==e.style.display);if(0!=t.length)if("Enter"==e.key){let e=t[0];e.children[0].click(),we(e.dataset.key),ke()}else"ArrowUp"==e.key?(o(t[t.length-1]),e.preventDefault()):"ArrowDown"==e.key&&(o(t[0]),e.preventDefault())}),e.on(n,"keydown",e=>{const r=Array.from(n.children).filter(e=>""==e.style.display);let s=r.indexOf(document.activeElement.parentElement);if("ArrowDown"==e.key)s++;else{if("ArrowUp"!=e.key)return;s--}s<0||s>=r.length?(t.focus(),function(e){let t=e.value.length;if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}}(t),n.scrollTop=0,e.preventDefault()):(o(r[s]),e.preventDefault())}),e.on(n,"click",e=>{we(e.target.parentElement.dataset.key)})}(t,n),document.body.appendChild(r),{modal:r,input:t,results:n}}));async function ve(){if(fe)return;fe=!0;let{modal:e,input:t}=await ye();e.classList.remove("cfpp-hidden"),t.focus()}async function ke(){if(!fe)return;fe=!1;let{modal:e,input:t,results:n}=await ye();e.classList.add("cfpp-hidden"),t.value="",[].forEach.call(n.children,e=>e.style.display="")}function we(e){let t=he(localStorage.finderPriority);const n=Object.values(t).reduce((e,t)=>Math.max(e,t),0);t[e]=n+1,localStorage.finderPriority=JSON.stringify(t)}function Ce(){let t=document.getElementsByName("sourceFile");0!=t.length&&(t=t[0],e.on(window,"focus",()=>{e.$(".submit",t.parentNode.parentNode.parentNode).focus()},{once:!0}),t.click())}function _e(){const t=e.$("#pageContent");t&&(t.scrollIntoView(),document.documentElement.scrollBy(0,-20))}var $e=Object.freeze({__proto__:null,install:function(){const t={submit:Ce,scrollToContent:_e,darkTheme:()=>C("darkTheme"),hideTestNumber:()=>C("hideTestNumber"),finder:ve};function n(e,t){let n={};for(let o in e){let r=e[o].toLowerCase(),s=t[o];n[r]=s}return n}let o=n(k("shortcuts"),t);i("shortcuts",e=>o=n(e,t)),e.on(document,"keydown",t=>{if(e.isEditable(document.activeElement))return;let n=function(e){let t="";var n;return e.metaKey&&(t+="Meta+"),e.ctrlKey&&(t+="Ctrl+"),e.altKey&&(t+="Alt+"),e.shiftKey&&(t+="Shift+"),t+=" "==e.key?"Space":(n=e.key)[0].toUpperCase()+n.slice(1).toLowerCase(),t}(t).toLowerCase();const r=o[n];r&&(t.preventDefault(),t.stopPropagation(),r())})}});const xe=t=>n=>t.appendChild(e.element("tr",{className:"boxRow"},e.element("td",null,e.element("div",{style:"display: flex;"},e.element("div",{style:"display: inline-block; flex: 1;"}," ",n," ")))));function Te(){let t=e.$(".toggle-favourite",sidebar),n=t&&t.closest("tr");t&&(t.style.height="14px",e.$("tr a",sidebar).appendChild(t),n.remove())}let Ee=!1;const Se=g.ready((function(){if(!k("sidebarBox"))return;let t,r=e.$("#sidebar"),s=e.$("#sidebar>:first-child .rtable"),a=e.$(".sidebox .rtable tbody",r),i=[].slice.call(e.$$(".sidebox form",r)),l=e.$(".second-level-menu"),c=e.$$(".second-level-menu-list li>a",l);if(!(r&&s&&a&&l))return;if(Ee)return Ne();var d;Ee=!0,function(t,n,o){let r=e.$("#pageContent");o.style.display="none",n.forEach(e=>e.closest(".sidebox").style.display="none"),t.style.marginTop=0,r.style.paddingTop=0}(r,i,l),i.length&&e.$(".submit",i[i.length-1])&&(t=i.pop()),n(o,(d=xe(a),e=>[].forEach.call(e,d)))([c,i]),t&&xe(a)(t),Te()}));function Ne(){g.global.Codeforces.showMessage("Please refresh the page to see changes")}var Le=Object.freeze({__proto__:null,install:Se,uninstall:function(){Ne()}});const Fe=g.ready((function(){const t=e.$("._MashupContestEditFrame_addProblem");t&&((t=>{let n=e.element("div",{style:"text-align: center;"},e.element("input",{type:"submit",onClick:async function(){let n=e.$(".ac_input",t),o=e.$("._MashupContestEditFrame_addProblemLink");const r=e=>new Promise(t=>{n.value=e,o.click(),function e(){if(""==n.value)return t();setTimeout(e,100)}()}),s=n.value.split(/\s/).filter(e=>""!=e);for(let e of s)await r(e)},value:"Add all"}),e.element("span",{style:"border-radius: 50%; background: #959595; \n         color: white; margin-left: 0.5em;\n         display: inline-block; text-align: center; width: 1em;\n         cursor: pointer;",onClick:()=>g.global.Codeforces.showMessage('Input multiple problem codes separated by whitespace (like "123A 123B")\n                 and press "Add all" to add all of them at once')},"?"));t.insertAdjacentElement("afterend",n)})(t),(t=>{const n=e.$("._MashupContestEditFrame_frame"),o=()=>{k("mashupSpoilers")?n.classList.add("spoilered-mashup"):n.classList.remove("spoilered-mashup")};let r=e.element("div",{style:"text-align: center; margin-bottom: 1rem;"},e.element("input",{type:"submit",onClick:()=>{C("mashupSpoilers"),o()},value:"Toggle tag spoilers"}));t.insertAdjacentElement("afterend",r),o()})(t))}));var Pe=Object.freeze({__proto__:null,install:Fe});const Oe=g.ready((function(){if(/\/problem\//i.test(location.href)){let t=e.$(".title");t&&t.textContent&&(document.title=t.textContent)}}));var Ue=Object.freeze({__proto__:null,install:Oe});document.currentScript.remove(),async function(e){e()}((async function(){console.log("Codeforces++ is running!"),y=t(JSON.parse,{})(localStorage.cfpp),y=Object.assign({},_,y),"requestIdleCallback"in g.global?g.global.requestIdleCallback($,{timeout:1e3}):$(),i("request config change",({id:e,value:t})=>{y[e]=t,l(e,t)});let n=["style","dark_theme","show_tags","problemset","search_button","show_tutorial","navbar","redirector","update_standings","twin_standings","verdict_test","shortcuts","sidebar","mashup","change_page_title"];[[N,"style"],[L,"darkTheme"],[O,"showTags"],[M,"showTags"],[z,"searchBtn"],[B,""],[G,""],[W,""],[Y,"standingsItv"],[se,"standingsTwin"],[ue,"hideTestNumber"],[$e,""],[Le,"sidebarBox"],[Pe,""],[Ue,""]].forEach(([e,t],o)=>{var r,a;(r=e.install,a=e=>console.log(`Error installing module #${n[o]}:`,e),(...e)=>{try{return r(...e)}catch(e){return a(e)}})(),t&&function(e,t){i(t,t=>{!0===t||!1===t?t?e.install():(e.uninstall||s)():((e.uninstall||s)(),e.install(t))})}(e,t)}),S(),async function(){const t=await g.userHandle();if(location.href.endsWith("/groups/with/"+t)){const t=/\/group\/([\d\w]+)/,n=e=>t.exec(e)[1];let o=[].map.call(e.$$(".groupName"),e=>[e.innerText.trim(),n(e.href)]);localStorage.userGroups=JSON.stringify(o)}}(),g.run_when_ready((function(){k("version")!=g.version&&(w("version",g.version),g.global.Codeforces.showMessage(`Codeforces++ was updated to version ${g.version}!\n            Read the <a href="https://github.com/LeoRiether/CodeforcesPP/releases/latest" style="text-decoration:underline !important;color:white;">\n            changelog</a>`))}))}))}();
